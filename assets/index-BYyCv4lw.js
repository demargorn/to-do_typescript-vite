(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();(function(){const a=document.getElementById("todo-list"),d=document.getElementById("user-todo"),s=document.querySelector("form");let i=[],o=[];document.addEventListener("DOMContentLoaded",v),s==null||s.addEventListener("submit",T);function r(t){const e=o.find(n=>n.id===t);return(e==null?void 0:e.name)||""}function l({id:t,userId:e,title:n,completed:p}){const c=document.createElement("li");c.className="todo-item",c.dataset.id=String(t),c.innerHTML=`<span>${n} <i>by</i> <b>${r(e)}</b></span>`;const f=document.createElement("input");f.type="checkbox",f.checked=p,f.addEventListener("change",h);const m=document.createElement("span");m.innerHTML="&times;",m.className="close",m.addEventListener("click",y),c.prepend(f),c.append(m),a==null||a.prepend(c)}function E(t){if(d){const e=document.createElement("option");e.value=String(t.id),e.innerText=t.name,d.append(e)}}function g(t){var e,n;if(a){i=i.filter(c=>c.id!==t);const p=a.querySelector(`[data-id="${t}"]`);p&&((e=p.querySelector("input"))==null||e.removeEventListener("change",h),(n=p.querySelector(".close"))==null||n.removeEventListener("click",y),p.remove())}}function u(t){alert(t.message)}function v(){Promise.all([w(),L()]).then(t=>{[i,o]=t,i.forEach(e=>l(e)),o.forEach(e=>E(e))})}function T(t){t.preventDefault(),s&&b({userId:Number(s.user.value),title:s.todo.value,completed:!1})}function h(){if(this.parentElement){const e=this.parentElement.dataset.id,n=this.checked;e&&S(e,n)}}function y(){if(this.parentElement){const e=this.parentElement.dataset.id;e&&j(e)}}async function w(){try{return await(await fetch("https://jsonplaceholder.typicode.com/todos?_limit=10")).json()}catch(t){return t instanceof Error&&u(t),[]}}async function L(){try{return await(await fetch("https://jsonplaceholder.typicode.com/users?_limit=5")).json()}catch(t){return t instanceof Error&&u(t),[]}}async function b(t){try{const n=await(await fetch("https://jsonplaceholder.typicode.com/todos",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json();l(n)}catch(e){e instanceof Error&&u(e)}}async function S(t,e){try{if(!(await fetch(`https://jsonplaceholder.typicode.com/todos/${t}`,{method:"PATCH",body:JSON.stringify({completed:e}),headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to connect with the server! Please try later.")}catch(n){n instanceof Error&&u(n)}}async function j(t){try{if((await fetch(`https://jsonplaceholder.typicode.com/todos/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)g(t);else throw new Error("Failed to connect with the server! Please try later.")}catch(e){e instanceof Error&&u(e)}}})();
